<html>
<head></head>
<body>
  <h1>A Simple State Test</h1>
  <p>State: <span id='page_state'></span></p>
  <div class='loading' id='loading'>Loading....</div>

  <script type='text/javascript'>

  
  function App() {
    var writeHash = function() {
      document.getElementById('page_state').innerHTML = "Javascript rendering complete for client-side route " + document.location.hash;
      var loadingMask = document.getElementById('loading');
      if(loadingMask) loadingMask.parentNode.removeChild(loadingMask);
      console.log('done...');
    };

    window.addEventListener("hashchange", writeHash, false);
    setTimeout(writeHash, 500);
  };

  App.prototype.pageHasLoaded = function() {
    return !document.getElementById('loading');
  };

  //
  // Only execute js if loading the page using an unescaped url
  //
  if(/#.*$/.test(document.location.href)) window.app = new App();

  </script>
</body>
</html>